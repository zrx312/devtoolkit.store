filterBtns.forEach(btn => {
    btn.addEventListener('click', function() {
        // 移除同组中其他按钮的active类
        const parent = this.parentElement;
        parent.querySelectorAll('.filter-btn').forEach(button => {
            button.classList.remove('active');
        });
        
        // 为当前按钮添加active类
        this.classList.add('active');
        
        // 实现筛选逻辑
        filterTools();
    });
});

// 重置筛选按钮
const resetBtn = document.querySelector('.filter-reset a');
if (resetBtn) {
    resetBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // 重置所有筛选按钮
        document.querySelectorAll('.filter-options').forEach(group => {
            const allBtn = group.querySelector('.filter-btn:first-child');
            
            // 移除所有按钮的active类
            group.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 为"全部"按钮添加active类
            if (allBtn) {
                allBtn.classList.add('active');
            }
        });
        
        // 显示所有工具
        document.querySelectorAll('.tool-card').forEach(card => {
            card.style.display = 'flex';
        });
    });
}

// 平滑滚动功能
const categoryLinks = document.querySelectorAll('.category-btn');

categoryLinks.forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        
        if (targetSection) {
            const headerHeight = document.querySelector('header').offsetHeight;
            const targetPosition = targetSection.getBoundingClientRect().top + window.pageYOffset - headerHeight - 20;
            
            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });
        }
    });
});

// 工具筛选功能
function filterTools() {
    // 获取所有活跃的筛选条件
    const priceFilter = document.querySelector('.filter-group:nth-child(1) .filter-btn.active').textContent;
    const sourceFilter = document.querySelector('.filter-group:nth-child(2) .filter-btn.active').textContent;
    const levelFilter = document.querySelector('.filter-group:nth-child(3) .filter-btn.active').textContent;
    
    // 筛选所有工具卡片
    document.querySelectorAll('.tool-card').forEach(card => {
        const tags = card.querySelectorAll('.tag');
        let tagTexts = [];
        
        tags.forEach(tag => {
            tagTexts.push(tag.textContent);
        });
        
        // 检查是否符合价格筛选
        const matchesPrice = priceFilter === '全部' || tagTexts.includes(priceFilter);
        
        // 检查是否符合开源状态筛选
        const matchesSource = sourceFilter === '全部' || tagTexts.includes(sourceFilter);
        
        // 检查是否符合难易程度筛选
        const matchesLevel = levelFilter === '全部' || tagTexts.includes(levelFilter);
        
        // 显示或隐藏工具卡片
        if (matchesPrice && matchesSource && matchesLevel) {
            card.style.display = 'flex';
        } else {
            card.style.display = 'none';
        }
    });
}
